---
layout: '../../layouts/MarkdownPost.astro'
title: '百度智能编码助手Comate初体验'
pubDate: 2023-12-22
description: 'Comate助手初体验,基于百度文心一言实现'
author: 'UncleLLD'
cover:
    url: 'https://i.imgs.ovh/2023/12/22/WNgro.th.png'
    alt: 'cover'
tags: ["工具"]
theme: 'dark'
featured: true

---

## 简介

越来越多的厂商提供了智能代码助手，百度也不例外。**Baidu Comate（智能代码助手）**是基于文心大模型，结合百度积累多年的编程现场大数据和外部优秀开源数据，打造的新一代编码辅助工具。拥有代码智能、场景丰富、创造价值、广泛应用等多重产品优势，可实现“帮你想、帮你写、帮你改”的场景应用形态。提升编码效率，释放“十倍”软件生产力。

官方体验地址：[https://comate.baidu.com/](https://comate.baidu.com/)

## 产品优势

- **精准且高效的代码智能推荐： **Baidu Comate 的核心竞争力，百度内部80%+工程师都在使用，整体采纳率达到40%+，高活采纳率达到64%+，每提交100行代码，就有20行由 Baidu Comate 生成。
- **强大的智能生成和问答，研发场景全方位覆盖：** Baidu Comate 不仅提供覆盖全方位研发场景的众多智能生成功能，同时还支持在IDE中进行问答，拒绝中断和打扰，打造沉浸式的高效编码体验。
- **支持全平台、主流 IDE 和众多编程语言：** Baidu Comate 支持 Windows、macOS、Linux 三大操作系统、Visual Studio Code 和 JetBrains IDEs 多款主流 IDE 以及30+种众多编程语言。
- **提供数据可视化功能：** Baidu Comate 提供详尽的数据分析功能，包括采纳率、采纳量趋势、采纳量按功能或语言分布等等，全方位可视化提效成果，助力个人与企业的提效与复盘。
- **支持私有化部署：**Baidu Comate 提供私有化部署服务以及详尽的技术支持，让您享受高效编码的同时无后顾之忧，全力保障公司信息安全。
- **高安全性：**Baidu Comate 的所有数据不离境，风险可控；本地输出拦截，确保敏感数据不传输；把控输出内容，确保用户可见内容安全。

## 支持的编程语言

当前 Baidu Comate 支持的语言/框架如下：

- **后端：** C、C++、Java、Python、Go、PHP、Rust
- **前端：** HTML、JavaScript、CSS、Less、swan、San、Vue、Scss、Sass、Stylus、pug、mermaid
- **App端：** ObjectC、Kotlin、Swift
- **其它：** Perl、Ruby、Shell、vhdl、GraphQL、Dockerfile
- 100+种语言

## 支持的 IDE

- **JetBrains IDEs**
  - IDE 类型：IntelliJ IDEA、PyCharm、GoLand、WebStorm、CLion、PhpStorm、Android Studio 等
  - IDE 版本：2021.1 - 2023.2
- **Visual Studio Code**
  - IDE 版本：1.70 及以上

## 支持的操作系统

Windows 8.1 及以上、macOS、Linux

## 体验

这里以vs code作为介绍体验

### VS code安装

1. 在 Visual Studio Code 侧边导航单击扩展；
2. 在搜索框中输入 Baidu Comate；
3. 找到 Baidu Comate 后单击 Install 安装。

![WYP0C.png|inline](https://i.imgs.ovh/2023/12/22/WYP0C.png)

### 插件配置

**方式1：无License用户**

1. 点击 Install 安装后，Visual Studio Code 右下角会弹出登录提示框，单击去登录；
2. 点击去登录，唤起登录页面，支持百度、微信、微博、QQ扫描登录。
3. 登录后可免费试用一个月，后续支持续费，以获取更长有效期。
4. 返回 Visual Studio Code 开始编码，即可体验 Comate 编码助手的各项功能。

**方式2：购买License用户**

1. 个人或者企业从 百度智能云 购买 License后，可按下图完成用户名和License的配置。
2. 配置完成后，返回 Visual Studio Code 即可体验 Comate 编码助手的各项功能。

JetBrains 与vs code大同小异，参考相关文档。

![WdP5v.png|inline](https://i.imgs.ovh/2023/12/22/WdP5v.png)

右下角进行登录

![WdJ2v.png|inline](https://i.imgs.ovh/2023/12/22/WdJ2v.png)

![Wdzhe.png|inline](https://i.imgs.ovh/2023/12/22/Wdzhe.png)

### 实践

以生成斐波拉契数列代码为例讲解

#### 智能推荐

基于百度厂内优质编程现场大数据以及大量优秀的开源数据进行训练，Baidu Comate 可以通过分析当前代码的上下文语义环境，快速推理出下一行或下一段可能的代码内容，采纳方式高效便捷，从而减少您的实际输入，提高研发效率。

* 单行推荐

单行推荐是在续写代码场景中最直接、最高效的体现方式。在打开一个代码文件后，开始编码。在编码过程中稍微等待一下，即可看到 Baidu Comate 的推荐内容。

![WdjC9.png|inline](https://i.imgs.ovh/2023/12/22/WdjC9.png)

可以使用tab键采纳或者使用esc键取消

| 操作                                              | macOS         | Windows           |
| ------------------------------------------------- | ------------- | ----------------- |
| 采纳推荐                                          | Tab           | Tab               |
| 取消推荐                                          | esc           | esc               |
| 查看上一推荐                                      | option + [    | Alt + [           |
| 查看下一推荐                                      | option + ]    | Alt + ]           |
| 按单词部分采纳推荐（仅适用于 Visual Studio Code） | ⌘ + →         | Ctrl + →          |
| 唤起 Baidu Comate 对话框（Visual Studio Code）    | ⌘ + Y         | Windows徽标键 + Y |
| 唤起 Baidu Comate 对话框（JetBrains IDEs）        | ⌘ + Shift + Y | Ctrl + Shift + Y  |

* 多行推荐

多行推荐与单行推荐的使用方式一致。在符合多行推荐的条件下（如{(处、for循环、if判断等），Baidu Comate 会优先计算一次多行推荐逻辑。如果逻辑完整，则会展示多行推荐结果。

* 行间提示

在出现推荐内容后，鼠标移动到推荐内容上则会出现行间提示。行间提示用于展示更多能力、方便鼠标点按操作。

![Wd5eH.png|inline](https://i.imgs.ovh/2023/12/22/Wd5eH.png)

### 智能生成

Baidu Comate 支持注释生成代码、增强生成代码、生成单元测试、代码生成doc注释、代码解释、生成行间注释、长函数拆分等多种强大的智能生成功能，旨在全面满足多样化的研发场景需求，全方位提高研发效率。

#### 注释生成代码

注释生成代码是针对一段注释内容，生成相关的代码片段。适用于能够使用一句话描述清楚需求的情形，或生成常见的算法片段。

![WdY9D.png|inline](https://i.imgs.ovh/2023/12/22/WdY9D.png)

#### 增强生成代码

如果觉得注释生成代码中的结果不够准确，还可以使用增强生成代码功能调起更加精准的模型来理解和生成代码。

1. 触发方式同注释生成代码，待推荐生成后，出现“增强生成”按钮；
2. 点击“增强生成”，调出 Baidu Comate 对话框；
3. 等待结果返回。

#### 生成单元测试

生成单元测试，即针对一段函数（方法），生成其对应的单元测试代码。点击函数（方法）名上方的“生成单测”按钮使用该功能：

![WdEd5.png|inline](https://i.imgs.ovh/2023/12/22/WdEd5.png) 

![WdqFs.png|inline](https://i.imgs.ovh/2023/12/22/WdqFs.png)

#### 代码生成注释

代码生成注释，即通过理解一个函数（方法）的内容，为该函数（方法）生成注释。代码生成注释包括生成文档注释和生成行间注释。

##### 生成文档注释

1. 点击函数（方法）名上方的“函数注释”；
2. 等待结果返回；
3. 点击“采纳”，将注释内容插入函数（方法）头部。

![WdaP0.png|inline](https://i.imgs.ovh/2023/12/22/WdaP0.png)

![WdvWC.png|inline](https://i.imgs.ovh/2023/12/22/WdvWC.png)

##### 生成行间注释

生成行间注释，即针对一段已有的代码，按段落生成行间注释。当函数（方法）少于4500个字符时提供该功能。

1. 点击函数（方法）名上方的“行间注释”；
2. 等待结果返回；
3. 点击“采纳”，将注释内容插入函数（方法）体中。

![WNWTK.png|inline](https://i.imgs.ovh/2023/12/22/WNWTK.png)

![WN0n2.png|inline](https://i.imgs.ovh/2023/12/22/WN0n2.png)

#### 代码解释

代码解释，即使用大语言模型对给定的代码进行深入理解，然后生成易于人类理解的自然语言解释。这项功能旨在协助开发人员迅速理解现有的代码，从而提高研发效率。

点击函数（方法）名上方的“代码解释”即可使用该功能：

![W8CGm.png|inline](https://i.imgs.ovh/2023/12/22/W8CGm.png)

> 这段Python代码是用来计算Fibonacci数列的第n个元素的。Fibonacci数列是一个由0和1开始，每个后续数字是前两个数字之和的序列。
>
> 让我们逐行解释这段代码：
>
> 1. `def fibonacci(n):` - 定义一个名为`fibonacci`的函数，它接受一个参数`n`，代表我们想要求的是Fibonacci数列的第几个数字。
> 2. `"""` - 开始多行注释，用于描述函数的作用。
> 3. `计算Fibonacci数列的第n个元素` - 描述函数的功能。
> 4. `Args:` - 描述函数的输入参数。
> 5. `n (int): Fibonacci数列的元素个数` - 说明函数接受一个整数`n`作为参数，代表我们想要求的是Fibonacci数列的第几个数字。
> 6. `Returns:` - 描述函数的返回值。
> 7. `int: Fibonacci数列的第n个元素` - 说明函数返回的是Fibonacci数列的第n个数字。
> 8. `"""` - 结束多行注释。
> 9. `if n == 0:` - 判断如果`n`等于0，则直接返回0。因为Fibonacci数列的第一个数字是0。
> 10. `return 0` - 如果`n`等于0，则直接返回0。
> 11. `fib = [0, 1]` - 初始化一个包含两个元素的列表`fib`，这两个元素是0和1，对应Fibonacci数列的前两个数字。
> 12. `while len(fib) < n:` - 当`fib`列表的长度小于`n`时，执行循环。
> 13. `fib.append(sum(fib[-2:]))` - 在`fib`列表末尾添加最后两个元素的和。这实现了Fibonacci数列的定义：每个数字是前两个数字的和。
> 14. `print(fib)` - 打印`fib`列表。这会显示从0和1开始的Fibonacci数列，直到达到或超过`n`个元素。
> 15. `return fib[n - 1]` - 返回`fib`列表中的第`n-1`个元素。注意索引是从0开始的，所以我们需要减去1来获取正确的Fibonacci数列的元素。
>
> 这个函数基本上通过生成足够多的Fibonacci数列元素，然后返回第`n`个元素。但是，如果`n`非常大，这个方法可能不是最高效的，因为生成所有必要的Fibonacci数可能会消耗很多内存。对于大`n`，有更高效的算法可以计算Fibonacci数列的第`n`个元素。

或选中需要解释的代码部分，右键打开菜单，选择“Baidu Comate：解释代码”使用该功能：

![W8VMN.png|inline](https://i.imgs.ovh/2023/12/22/W8VMN.png)

> 这段Python代码是用来生成一个斐波那契数列（Fibonacci sequence）的。
>
> 首先，让我们详细解释代码的每一部分：
>
> 1. `while len(fib) < n:`
>
> 这是一个`while`循环，它会持续运行，直到`fib`列表的长度大于或等于`n`。 2. `fib.append(sum(fib[-2:]))`
>
> 这是循环体内的代码。
>
> ```
> 复制* `fib[-2:]`: 这是Python中的切片语法，它获取`fib`列表中的最后两个元素。例如，如果`fib = [1, 1, 2, 3, 5]`，那么`fib[-2:]`将会是`[3, 5]`。
> * `sum(fib[-2:])`: 这将上述切片中的两个数字相加。在我们的例子中，这将是`3 + 5 = 8`。
> * `fib.append(...)`: 这将上述的和添加到`fib`列表的末尾。
> ```
>
> 所以，这段代码的目的是生成一个长度为`n`的斐波那契数列。它从长度为2的数列开始（通常是[1, 1]），然后通过取最后两个数的和来添加新的数字，直到达到所需的长度`n`为止。
>
> 例如，如果我们要生成一个长度为6的斐波那契数列，开始时我们有[1, 1]。我们需要添加下一个数字。取[1, 1]的和得到2，所以现在我们有[1, 1, 2]。再次取[1, 1, 2]的和得到3，所以现在我们有[1, 1, 2, 3]。最后，取[2, 3]的和得到5，所以最终我们得到[1, 1, 2, 3, 5]。

#### 调优建议

调优建议是一个旨在帮助开发者便捷优化其代码质量的功能，通过大语言模型分析所选函数（方法），提供有针对性的建议，如使代码更加规范易读，或提高执行效率、减少资源消耗。

点击函数（方法）名上方的“调优建议”使用该功能：

![W8LuR.png|inline](https://i.imgs.ovh/2023/12/22/W8LuR.png)

> 代码分析：
>
> 1. **逻辑问题**：注释提到“计算Fibonacci数列的第n个元素”，但代码实际上返回的是Fibonacci数列的第n-1个元素。因为列表`fib`的索引从0开始，所以返回`fib[n - 1]`实际上是返回第n个元素。
> 2. **风格问题**：函数名和其实际功能不完全匹配。注释中提到的是“计算Fibonacci数列的第n个元素”，但实际上它计算和打印了整个Fibonacci序列，然后返回第n个元素。
> 3. **不必要的打印**：函数内部有一个`print(fib)`，这在实际使用中可能会干扰调用此函数的其他代码。
> 4. **代码效率**：使用列表存储整个Fibonacci序列可能不是最高效的方法，尤其是当n非常大时。
>
> 修复后的代码：
>
> ```
> Python复制def fibonacci(n):
>     """
>     计算Fibonacci数列的第n个元素
> 
>     Args:
>         n (int): Fibonacci数列的元素个数
> 
>     Returns:
>         int: Fibonacci数列的第n个元素
>     """
>     if n == 0:
>         return 0
>     elif n == 1:
>         return 1
>     else:
>         a, b = 0, 1
>         for _ in range(2, n + 1):
>             a, b = b, a + b
>         return b
> ```
>
> 优化点：
>
> 1. 直接使用两个变量`a`和`b`来迭代计算Fibonacci数列的第n个元素，而不是存储整个序列。这提高了空间效率。
> 2. 移除了不必要的打印语句。
> 3. 修正了函数名与其实际功能之间的不匹配问题。

或选中需要调优的代码部分，右键打开菜单，选择“Baidu Comate：调优建议”使用该功能：

![W8X8p.png|inline](https://i.imgs.ovh/2023/12/22/W8X8p.png)

> 分析代码，我们可以看到以下几个问题：
>
> 1. **代码风格**：注释使用了中文，通常最佳实践是使用英文注释，以便更广泛的开发者都能理解。
> 2. **逻辑问题**：此代码片段的目的是生成一个Fibonacci序列，但其逻辑仅适用于Python列表。如果其他开发者不知道这一背景，可能会对此代码的意图感到困惑。
> 3. **安全性**：此代码片段本身没有涉及任何明显的安全漏洞，如SQL注入等。
> 4. **性能问题**：此代码的效率不是最优的，因为它每次都使用`sum`函数来计算最后两个元素的和，这是不必要的。
>
> 针对上述问题，以下是修复和优化后的代码：
>
> ```
> Python复制fib = [0, 1]
> n = 10  # 假设n为10，你可以根据需要修改这个值
> 
> # Generate Fibonacci sequence up to length n
> while len(fib) < n:
>     fib.append(fib[-1] + fib[-2])
> 
> print(fib)
> ```
>
> 优化点总结：
>
> 1. 使用英文注释以提高代码的可读性和可维护性。
> 2. 直接使用`fib[-1] + fib[-2]`来计算新的Fibonacci数，而不是使用`sum(fib[-2:])`，这样更为直观且性能更佳。
> 3. 添加了一个示例值`n = 10`以明确代码的目的，但实际应用中，你可能需要从函数参数或其他地方获取这个值。

### 长函数拆分

长函数拆分主要用于将一个冗长的函数（方法），拆分成多个短函数（方法），使得代码更加简洁易读，易于复用和维护。当函数大于等于20行，且少于4500个字符时将提供该功能。这里将单测试相关内容提到上面，满足20行的要求

1. 点击函数（方法）名上方的“函数拆分”；
2. 等待结果返回；
3. 点击“采纳”，生成的内容将自动覆盖至代码编辑区；或点击“复制”，将生成内容复制至剪贴板。也可以手动复制所需代码片段。

![W837V.png|inline](https://i.imgs.ovh/2023/12/22/W837V.png)

![W8f8J.png|inline](https://i.imgs.ovh/2023/12/22/W8f8J.png)

### 智能问答

依托文心大模型，Baidu Comate 提供多轮对话智能问答功能，拒绝跳转和打扰，直接在 IDE 中解决您的研发问题，打造沉浸式的高效编码体验。

#### 唤起 Baidu Comate

唤起 Baidu Comate 对话框的快捷方式如下：

| 操作                                              | macOS         | Windows           |
| ------------------------------------------------- | ------------- | ----------------- |
| 采纳推荐                                          | Tab           | Tab               |
| 取消推荐                                          | esc           | esc               |
| 查看上一推荐                                      | option + [    | Alt + [           |
| 查看下一推荐                                      | option + ]    | Alt + ]           |
| 按单词部分采纳推荐（仅适用于 Visual Studio Code） | ⌘ + →         | Ctrl + →          |
| 唤起 Baidu Comate 对话框（Visual Studio Code）    | ⌘ + Y         | Windows徽标键 + Y |
| 唤起 Baidu Comate 对话框（JetBrains IDEs）        | ⌘ + Shift + Y | Ctrl + Shift + Y  |

也可以点击插件图标唤起 Baidu Comate

#### 多轮对话

##### 直接输入问题

1. 点击插件图标，或使用快捷键 ⌘Y 唤起 Baidu Comate；
2. 在输入框中输入问题，点击发送按钮；
3. 等待返回结果；
4. 点击“复制”，将生成内容复制至剪贴板。也可以手动复制所需内容；
5. 进一步提出您的需求，或开启下一轮对话。

![W86AW.png|inline](https://i.imgs.ovh/2023/12/22/W86AW.png)



##### 选中代码 输入问题

1. 点击插件图标，或使用快捷键 ⌘Y 唤起 Baidu Comate；
2. 选中相关代码，Baidu Comate 将围绕选中的代码与您对话；
3. 在输入框中输入问题，点击发送按钮；
4. 等待返回结果；
5. 点击“复制”，将生成内容复制至剪贴板。也可以手动复制所需内容；
6. 进一步提出您的需求，或开启下一轮对话。

![W8Wsv.png|inline](https://i.imgs.ovh/2023/12/22/W8Wsv.png)

#### 意见反馈

您可以通过点赞点踩评价 Baidu Comate 的回答质量，也欢迎您提交反馈意见，这将有助于 Baidu Comate 生成更优质的内容，从而更好的服务于您。

#### 清空对话

可以通过 Baidu Comate 面板右上角的“清空会话”按钮清空当前的多轮对话内容。请注意会话清空后无法恢复，请谨慎清理。

![WdDuA.png|inline](https://i.imgs.ovh/2023/12/22/WdDuA.png)

### 总结

智能编程助手对程序员工作的影响是一个双刃剑。从一方面来看，智能编程助手可以成为程序员的有力辅助工具，提供高效的代码生成、自动化的错误检测和修复、智能建议等功能，从而大大提升开发效率和质量。这些助手可以快速生成基础代码结构，减少重复性工作，使程序员能够更专注于解决复杂的问题和创造性的编码。

然而，智能编程助手也可能带来一些挑战和潜在的取代程序员工作的风险。首先，过于依赖智能编程助手可能导致程序员对底层原理和基础知识的理解不足，降低了他们的技术深度和独立解决问题的能力。其次，智能编程助手的错误或不准确的建议可能会导致代码质量下降，甚至引入安全漏洞。此外，对于某些复杂领域和创新性的任务，智能编程助手很难提供准确的解决方案，因为它们通常是基于已有的模式和规则进行操作。如果智能助手的功能足够强大，能够取代大部分常规的编码工作，那么可能会导致一部分程序员失去工作机会。这对于那些依赖编码工作谋生的人们来说是一个挑战。

因此，程序员在使用智能编程助手时应保持警惕和批判性思维。他们应该充分理解助手的工作原理，并对其提供的建议进行审慎评估和验证。程序员仍然需要拥有扎实的编程基础知识、算法和数据结构等核心技能，以便能够理解和纠正助手可能存在的问题。

综上所述，智能编程助手在提高程序员工作效率和质量方面具有潜力，但也需要程序员保持技术深度和批判性思维，以克服可能的挑战和风险，从而更好地应用这些工具来辅助和增强他们的工作。
